import{_ as f}from"./ValaxyMain.r4RVjkNb.js";import"./chunks/nprogress.B1y48mDD.js";import{d as F,u as v,a as C}from"./chunks/vue-router.CHIZp5-X.js";import{$ as x,a1 as e,V as _,Z as w,a0 as B,a2 as t,a4 as s,a5 as i,T as k,X as A}from"./framework.Bz32nx7L.js";import"./app.DDkDhs4v.js";import"./chunks/dayjs.BX5x0S-s.js";import"./chunks/vue-i18n.D51u75hK.js";import"./chunks/pinia.Bgqu1Nyu.js";/* empty css                    */const d="/OpenList-Docs/img/guide/reverse_proxy/bt_new_website.png",g="/OpenList-Docs/img/guide/reverse_proxy/bt_new_website_01.png",y="/OpenList-Docs/img/guide/reverse_proxy/bt_delete_default_config_01.png",c="/OpenList-Docs/img/guide/reverse_proxy/bt_delete_default_config_02.png",u="/OpenList-Docs/img/guide/reverse_proxy/bt_reverse_proxy.png",D={lang:"en"},P={class:"warning custom-block"},N={class:"custom-block-title custom-block-title-default"},z={lang:"zh-CN"},$={class:"warning custom-block"},S={class:"custom-block-title custom-block-title-default"},R=F("/guide/installation/reverse-proxy",async n=>JSON.parse('{"title":{"en":"Reverse proxy","zh-CN":"反向代理"},"description":"","frontmatter":{"title":{"en":"Reverse proxy","zh-CN":"反向代理"},"icon":"iconfont icon-page","top":10,"categories":["guide","installation"],"tag":["Install","Guide"],"sticky":true,"star":true},"headers":[],"relativePath":"pages/guide/installation/reverse-proxy.md","lastUpdated":1753073188000}'),{lazy:(n,r)=>n.name===r.name}),G={__name:"reverse-proxy",setup(n,{expose:r}){const{data:o}=R(),E=C(),m=v(),h=Object.assign(m.meta.frontmatter||{},o.value?.frontmatter||{});return E.currentRoute.value.data=o.value,A("valaxy:frontmatter",h),globalThis.$frontmatter=h,r({frontmatter:{title:{en:"Reverse proxy","zh-CN":"反向代理"},icon:"iconfont icon-page",top:10,categories:["guide","installation"],tag:["Install","Guide"],sticky:!0,star:!0}}),(l,a)=>{const p=w("VT"),b=f;return B(),x(b,{frontmatter:_(h)},{"main-content-md":e(()=>[a[8]||(a[8]=s("div",{lang:"en"},[s("p",null,[i("The program listens to port 5244 by default. If you do "),s("code",null,"reverse proxy"),i(", recommended you set "),s("a",{href:"./../../config/configuration#site_url"},"site_url"),i(" so that alist can works fine.")]),s("blockquote",null,[s("p",null,[i("If you want to use a sub folder, refer to "),s("a",{href:"./../../faq/howto#how-to-reverse-proxy-with-sub-directory"},"reverse proxy with sub folder")]),s("div",{class:"tip custom-block"},[s("p",{class:"custom-block-title"},[s("i",{class:"icon i-carbon-thumbs-up"}),i("Missing https or port / Can't Play video when reverse-proxy non-standard ports or enable https?")]),s("p",null,[i("You need to passed correct host header, refer to "),s("a",{href:"https://github.com/alist-org/alist/issues/726",target:"_blank",rel:"noreferrer"},"#726"),i(),s("a",{href:"https://github.com/alist-org/alist/issues/1159",target:"_blank",rel:"noreferrer"},"#1159"),i(),s("a",{href:"https://github.com/alist-org/alist/issues/2429",target:"_blank",rel:"noreferrer"},"#2429"),i(),s("a",{href:"https://github.com/alist-org/alist/issues/3644",target:"_blank",rel:"noreferrer"},"#3644"),i(),s("a",{href:"https://github.com/alist-org/alist/issues/4181",target:"_blank",rel:"noreferrer"},"#4181"),i(),s("a",{href:"https://github.com/alist-org/alist/issues/4719",target:"_blank",rel:"noreferrer"},"#4719")])])])],-1)),a[9]||(a[9]=s("div",{lang:"zh-CN"},[s("blockquote",null,[s("p",null,[i("程序默认监听 5244 端口。如有修改，请一并修改下列配置中的端口号。如果你使用反向代理，建议你设置"),s("a",{href:"./../../config/configuration#site_url"},"site_url"),i("，以帮助alist更好的工作。 如果你想使用子目录，参考"),s("a",{href:"./../../faq/howto#如何对子目录进行反向代理"},"这里")]),s("div",{class:"tip custom-block"},[s("p",{class:"custom-block-title"},[s("i",{class:"icon i-carbon-thumbs-up"}),i("反向代理非标准端口或启用https后丢失https或端口号/无法播放视频?")]),s("p",null,[i("你需要通过正确的Host头,请参考 "),s("a",{href:"https://github.com/alist-org/alist/issues/726",target:"_blank",rel:"noreferrer"},"#726"),i(),s("a",{href:"https://github.com/alist-org/alist/issues/1159",target:"_blank",rel:"noreferrer"},"#1159"),i(),s("a",{href:"https://github.com/alist-org/alist/issues/2429",target:"_blank",rel:"noreferrer"},"#2429"),i(),s("a",{href:"https://github.com/alist-org/alist/issues/3644",target:"_blank",rel:"noreferrer"},"#3644"),i(),s("a",{href:"https://github.com/alist-org/alist/issues/4181",target:"_blank",rel:"noreferrer"},"#4181"),i(),s("a",{href:"https://github.com/alist-org/alist/issues/4719",target:"_blank",rel:"noreferrer"},"#4719")])])])],-1)),a[10]||(a[10]=s("h2",{lang:"en",id:"nginx",tabindex:"-1"},[s("strong",null,"nginx"),i(),s("a",{class:"header-anchor",href:"#nginx","aria-label":'Permalink to "**nginx** { lang="en" }"'},"​")],-1)),a[11]||(a[11]=s("h2",{lang:"zh-CN",id:"nginx-1",tabindex:"-1"},[s("strong",null,"nginx"),i(),s("a",{class:"header-anchor",href:"#nginx-1","aria-label":'Permalink to "**nginx** { lang="zh-CN" }"'},"​")],-1)),a[12]||(a[12]=s("div",{lang:"en"},[s("p",null,"Add in the server field of the website configuration file"),s("div",{class:"language-nginx"},[s("button",{title:"Copy code",class:"copy"}),s("span",{class:"lang"},"nginx"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"location"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," / "),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"  proxy_set_header "),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"X-Forwarded-For $proxy_add_x_forwarded_for;")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"  proxy_set_header "),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"X-Forwarded-Proto $scheme;")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"  proxy_set_header "),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Host $http_host;")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"  proxy_set_header "),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"X-Real-IP $remote_addr;")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"  proxy_set_header "),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Range $http_range;")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"  proxy_set_header "),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"If-Range $http_if_range;")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"  proxy_redirect "),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"off"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"  proxy_pass "),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"http://127.0.0.1:5244;")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"  # the max size of file to upload")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"  client_max_body_size "),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"20000m"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"```")])])]),s("button",{class:"collapse"})])],-1)),a[13]||(a[13]=s("div",{lang:"zh-CN"},[s("p",null,"在网站配置文件的 server 字段中添加"),s("div",{class:"language-bash"},[s("button",{title:"Copy code",class:"copy"}),s("span",{class:"lang"},"bash"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"location"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," {")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"  proxy_set_header"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," X-Forwarded-For"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," $proxy_add_x_forwarded_for;")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"  proxy_set_header"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," X-Forwarded-Proto"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," $scheme;")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"  proxy_set_header"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," Host"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," $http_host;")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"  proxy_set_header"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," X-Real-IP"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," $remote_addr;")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"  proxy_set_header"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," Range"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," $http_range;")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"	proxy_set_header"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," If-Range"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," $http_if_range;")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"  proxy_redirect"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," off"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"  proxy_pass"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," http://127.0.0.1:5244"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"  # the max size of file to upload")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"  client_max_body_size"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," 20000m"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),s("button",{class:"collapse"})])],-1)),s("div",D,[s("div",P,[s("p",N,[a[0]||(a[0]=s("i",{class:"icon i-carbon-warning-alt"},null,-1)),k(p,{content:"blocks.warning"})]),a[1]||(a[1]=s("p",null,"If you use the bt.cn, be sure to delete the following default configuration",-1)),a[2]||(a[2]=s("ul",null,[s("li",null,"location ~ ^/(.user.ini|.htaccess|.git|.svn|.project|LICENSE|README.md"),s("li",null,"location ~ .*.(gif|jpg|jpeg|png|bmp|swf)$"),s("li",null,"location ~ .*.(js|css)?$")],-1))])]),s("div",z,[s("div",$,[s("p",S,[a[3]||(a[3]=s("i",{class:"icon i-carbon-warning-alt"},null,-1)),k(p,{content:"blocks.warning"})]),a[4]||(a[4]=s("p",null,"如果使用宝塔面板，请务必删除以下默认配置",-1)),a[5]||(a[5]=s("div",{class:"language-bash"},[s("button",{title:"Copy code",class:"copy"}),s("span",{class:"lang"},"bash"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"-"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," location"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," ~"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," ^/"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"\\.user.ini"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"|"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"\\.htaccess"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"|"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"\\.git"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"|"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"\\.svn"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"|"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"\\.project"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"|"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"LICENSE"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"|"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"README.md")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"-"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," location"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," ~"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," ."),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"\\*\\."),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"gif"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"|"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"jpg"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"|"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"jpeg"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"|"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"png"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"|"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"bmp"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"|"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"swf"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")$")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"-"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," location"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," ~"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," ."),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"\\*\\."),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"js"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"|"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"css"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"?"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"$")])])]),s("button",{class:"collapse"})],-1)),a[6]||(a[6]=s("p",null,[i("并在"),s("code",null,"/www/server/nginx/conf/proxy.conf"),i("中或对应网站配置文件中设置禁用Nginx缓存，否则默认配置下访问较大文件时Nginx会先尝试将远程文件缓存至本机，导致播放失败")],-1)),a[7]||(a[7]=s("div",{class:"language-bash"},[s("button",{title:"Copy code",class:"copy"}),s("span",{class:"lang"},"bash"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"proxy_cache"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," cache_one"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"; "),s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 删除这一行")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"proxy_max_temp_file_size"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"; "),s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"#加上这一行")])])]),s("button",{class:"collapse"})],-1))])]),a[14]||(a[14]=s("div",{lang:"en"},[s("p",null,[i("Disable Nginx caching in "),s("code",null,"/www/server/nginx/conf/proxy.conf"),i(" or the corresponding website configuration file. Otherwise, with the default configuration, when accessing large files, Nginx will attempt to cache the remote file locally first, resulting in playback failures.")]),s("div",{class:"language-bash"},[s("button",{title:"Copy code",class:"copy"}),s("span",{class:"lang"},"bash"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"proxy_cache"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," cache_one"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"; "),s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# Remove this line")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"proxy_max_temp_file_size"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 0"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"; "),s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# Add this line")])])]),s("button",{class:"collapse"})])],-1)),a[15]||(a[15]=s("div",{lang:"zh-CN"},[s("div",{class:"language-"},[s("button",{title:"Copy code",class:"copy"}),s("span",{class:"lang"}),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span")]),i(`
`),s("span",{class:"line"},[s("span",null,"如果需要使用HTTP/3，需要将对应`HOST`行修改为：")]),i(`
`),s("span",{class:"line"},[s("span")]),i(`
`),s("span",{class:"line"},[s("span",null,'```bash title="conf"')]),i(`
`),s("span",{class:"line"},[s("span",null,"proxy_set_header Host $host:$server_port;")]),i(`
`),s("span",{class:"line"},[s("span",null,"```")]),i(`
`),s("span",{class:"line"},[s("span")]),i(`
`),s("span",{class:"line"},[s("span",null,"这样修改后的配置同时也可以兼容HTTP/2及更低版本的请求。")])])]),s("button",{class:"collapse"})])],-1)),a[16]||(a[16]=s("h2",{lang:"en",id:"apache",tabindex:"-1"},[s("strong",null,"Apache"),i(),s("a",{class:"header-anchor",href:"#apache","aria-label":'Permalink to "**Apache** { lang="en" }"'},"​")],-1)),a[17]||(a[17]=s("h2",{lang:"zh-CN",id:"apache-1",tabindex:"-1"},[s("strong",null,"Apache"),i(),s("a",{class:"header-anchor",href:"#apache-1","aria-label":'Permalink to "**Apache** { lang="zh-CN" }"'},"​")],-1)),a[18]||(a[18]=s("div",{lang:"en"},[s("p",null,"Add the anti-generation configuration item ProxyPass under the VirtualHost field, such as:"),s("div",{class:"language-xml"},[s("button",{title:"Copy code",class:"copy"}),s("span",{class:"lang"},"xml"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"<"),s("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"VirtualHost"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," *:80>")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ServerName myapp.example.com")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ServerAdmin webmaster@example.com")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    DocumentRoot /www/myapp/public")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    AllowEncodedSlashes NoDecode")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ProxyPreserveHost On")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'    ProxyPass "/" "http://127.0.0.1:5244/" nocanon')]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'    ProxyPassReverse "/" "http://127.0.0.1:5244/" nocanon')]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"</"),s("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"VirtualHost"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},">")])])]),s("button",{class:"collapse"})])],-1)),a[19]||(a[19]=s("div",{lang:"zh-CN"},[s("p",null,"在 VirtualHost 字段下添加配置项 ProxyPass，如："),s("div",{class:"language-xml"},[s("button",{title:"Copy code",class:"copy"}),s("span",{class:"lang"},"xml"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"<"),s("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"VirtualHost"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," *:80>")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ServerName myapp.example.com")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ServerAdmin webmaster@example.com")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    DocumentRoot /www/myapp/public")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    AllowEncodedSlashes NoDecode")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ProxyPreserveHost On")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'    ProxyPass "/" "http://127.0.0.1:5244/" nocanon')]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},'    ProxyPassReverse "/" "http://127.0.0.1:5244/" nocanon')]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"</"),s("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"VirtualHost"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},">")])])]),s("button",{class:"collapse"})])],-1)),a[20]||(a[20]=s("h2",{lang:"en",id:"caddy",tabindex:"-1"},[s("strong",null,"Caddy"),i(),s("a",{class:"header-anchor",href:"#caddy","aria-label":'Permalink to "**Caddy** { lang="en" }"'},"​")],-1)),a[21]||(a[21]=s("h2",{lang:"zh-CN",id:"caddy-1",tabindex:"-1"},[s("strong",null,"Caddy"),i(),s("a",{class:"header-anchor",href:"#caddy-1","aria-label":'Permalink to "**Caddy** { lang="zh-CN" }"'},"​")],-1)),a[22]||(a[22]=s("div",{lang:"en"},[s("p",null,"Add the reverse_proxy configuration item reverse_proxy under the Caddyfile file, for example:"),s("div",{class:"language-xml"},[s("button",{title:"Copy code",class:"copy"}),s("span",{class:"lang"},"xml"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":80 {")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"     reverse_proxy 127.0.0.1:5244")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),s("button",{class:"collapse"})])],-1)),a[23]||(a[23]=s("div",{lang:"zh-CN"},[s("p",null,"在 Caddyfile 文件下添加 reverse_proxy，如："),s("div",{class:"language-"},[s("button",{title:"Copy code",class:"copy"}),s("span",{class:"lang"}),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",null,":80 {")]),i(`
`),s("span",{class:"line"},[s("span",null,"  reverse_proxy 127.0.0.1:5244")]),i(`
`),s("span",{class:"line"},[s("span",null,"}")])])]),s("button",{class:"collapse"})]),s("p",null,"如果部署在 443 端口正常使用的服务器上且使用域名进行访问，建议使用这种配置让 Caddy 自动申请证书："),s("div",{class:"language-"},[s("button",{title:"Copy code",class:"copy"}),s("span",{class:"lang"}),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",null,"example.com {")]),i(`
`),s("span",{class:"line"},[s("span",null,"  reverse_proxy 127.0.0.1:5244")]),i(`
`),s("span",{class:"line"},[s("span",null,"}")]),i(`
`),s("span",{class:"line"},[s("span",null,"将 `example.com` 替换为你自己解析后的域名。")])])]),s("button",{class:"collapse"})])],-1)),a[24]||(a[24]=s("h2",{lang:"en",id:"demonstration-of-setting-up-reverse-proxy-in-bt-panel",tabindex:"-1"},[s("strong",null,"Demonstration of Setting up Reverse Proxy in BT Panel"),i(),s("a",{class:"header-anchor",href:"#demonstration-of-setting-up-reverse-proxy-in-bt-panel","aria-label":'Permalink to "**Demonstration of Setting up Reverse Proxy in BT Panel** { lang="en" }"'},"​")],-1)),a[25]||(a[25]=s("h2",{lang:"zh-CN",id:"宝塔设置反向代理示范",tabindex:"-1"},[s("strong",null,"宝塔设置反向代理示范"),i(),s("a",{class:"header-anchor",href:"#宝塔设置反向代理示范","aria-label":'Permalink to "**宝塔设置反向代理示范** { lang="zh-CN" }"'},"​")],-1)),a[26]||(a[26]=s("h3",{lang:"en",id:"_1-login-to-the-bt-panel-and-add-a-new-website",tabindex:"-1"},[i("1.Login to the BT panel and add a new website. "),s("a",{class:"header-anchor",href:"#_1-login-to-the-bt-panel-and-add-a-new-website","aria-label":'Permalink to "1.Login to the BT panel and add a new website. { lang="en" }"'},"​")],-1)),a[27]||(a[27]=s("h3",{lang:"zh-CN",id:"_1-登录宝塔面板-添加站点",tabindex:"-1"},[i("1.登录宝塔面板，添加站点； "),s("a",{class:"header-anchor",href:"#_1-登录宝塔面板-添加站点","aria-label":'Permalink to "1.登录宝塔面板，添加站点； { lang="zh-CN" }"'},"​")],-1)),a[28]||(a[28]=s("div",{lang:"en"},[s("figure",null,[s("img",{src:d,alt:"bt_new_website",loading:"lazy",decoding:"async"})])],-1)),a[29]||(a[29]=s("div",{lang:"zh-CN"},[s("figure",null,[s("img",{src:d,alt:"bt_new_website",loading:"lazy",decoding:"async"})])],-1)),a[30]||(a[30]=s("h3",{lang:"en",id:"_2-modify-the-website-settings",tabindex:"-1"},[i("2.Modify the website settings. "),s("a",{class:"header-anchor",href:"#_2-modify-the-website-settings","aria-label":'Permalink to "2.Modify the website settings. { lang="en" }"'},"​")],-1)),a[31]||(a[31]=s("h3",{lang:"zh-CN",id:"_2-修改站点设置",tabindex:"-1"},[i("2.修改站点设置； "),s("a",{class:"header-anchor",href:"#_2-修改站点设置","aria-label":'Permalink to "2.修改站点设置； { lang="zh-CN" }"'},"​")],-1)),a[32]||(a[32]=s("div",{lang:"en"},[s("figure",null,[s("img",{src:g,alt:"bt_new_website_01",loading:"lazy",decoding:"async"})])],-1)),a[33]||(a[33]=s("div",{lang:"zh-CN"},[s("figure",null,[s("img",{src:g,alt:"bt_new_website_01",loading:"lazy",decoding:"async"})])],-1)),a[34]||(a[34]=s("h3",{lang:"en",id:"_3-remove-the-default-panel-code",tabindex:"-1"},[i("3.Remove the default panel code. "),s("a",{class:"header-anchor",href:"#_3-remove-the-default-panel-code","aria-label":'Permalink to "3.Remove the default panel code. { lang="en" }"'},"​")],-1)),a[35]||(a[35]=s("h3",{lang:"zh-CN",id:"_3-删除面板默认代码",tabindex:"-1"},[i("3.删除面板默认代码； "),s("a",{class:"header-anchor",href:"#_3-删除面板默认代码","aria-label":'Permalink to "3.删除面板默认代码； { lang="zh-CN" }"'},"​")],-1)),a[36]||(a[36]=s("div",{lang:"en"},[s("p",null,[s("img",{src:y,alt:"bt_delete_default_config_01"}),s("img",{src:c,alt:"bt_delete_default_config_02"})])],-1)),a[37]||(a[37]=s("div",{lang:"zh-CN"},[s("p",null,[s("img",{src:y,alt:"bt_delete_default_config_01"}),s("img",{src:c,alt:"bt_delete_default_config_02"})])],-1)),a[38]||(a[38]=s("h3",{lang:"en",id:"_4-add-the-reverse-proxy",tabindex:"-1"},[i("4.Add the reverse proxy. "),s("a",{class:"header-anchor",href:"#_4-add-the-reverse-proxy","aria-label":'Permalink to "4.Add the reverse proxy. { lang="en" }"'},"​")],-1)),a[39]||(a[39]=s("h3",{lang:"zh-CN",id:"_4-添加反向代理",tabindex:"-1"},[i("4.添加反向代理； "),s("a",{class:"header-anchor",href:"#_4-添加反向代理","aria-label":'Permalink to "4.添加反向代理； { lang="zh-CN" }"'},"​")],-1)),a[40]||(a[40]=s("div",{lang:"en"},[s("figure",null,[s("img",{src:u,alt:"bt_reverse_proxy",loading:"lazy",decoding:"async"})]),s("blockquote",null,[s("p",null,[i("If you need to apply for an "),s("code",null,"SSL certificate"),i(", you can first apply for the certificate in the "),s("code",null,"SSL"),i(" option, and then set up the reverse proxy. Alternatively, you can set up the reverse proxy first, disable the proxy function, apply for an "),s("code",null,"SSL"),i(" certificate, and then enable the proxy again.")])])],-1)),a[41]||(a[41]=s("div",{lang:"zh-CN"},[s("figure",null,[s("img",{src:u,alt:"bt_reverse_proxy",loading:"lazy",decoding:"async"})]),s("blockquote",null,[s("p",null,[i("如需申请"),s("code",null,"SSL"),i("证书，可先在"),s("code",null,"SSL"),i("选项中申请证书，然后在设置反向代理。或者设置反向代理之后，关闭反向代理功能，申请"),s("code",null,"SSL"),i("证书后再次开启代理。")])])],-1))]),"main-header":e(()=>[t(l.$slots,"main-header")]),"main-header-after":e(()=>[t(l.$slots,"main-header-after")]),"main-nav":e(()=>[t(l.$slots,"main-nav")]),"main-content-before":e(()=>[t(l.$slots,"main-content-before")]),"main-content":e(()=>[t(l.$slots,"main-content")]),"main-content-after":e(()=>[t(l.$slots,"main-content-after")]),"main-nav-before":e(()=>[t(l.$slots,"main-nav-before")]),"main-nav-after":e(()=>[t(l.$slots,"main-nav-after")]),comment:e(()=>[t(l.$slots,"comment")]),footer:e(()=>[t(l.$slots,"footer")]),aside:e(()=>[t(l.$slots,"aside")]),"aside-custom":e(()=>[t(l.$slots,"aside-custom")]),default:e(()=>[t(l.$slots,"default")]),_:3},8,["frontmatter"])}}};export{G as default,R as usePageData};
